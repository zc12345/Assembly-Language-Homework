;-----------------------
;显示数列中的值
SHOWHEX MACRO	NUM
LOCAL LPS,SHOW1,NEXT
	PUSHF
	PUSH AX
	PUSH BX
	PUSH CX
	PUSH DX
	PUSH DI

	MOV BX,NUM
	MOV DI,4
LPS:MOV CL,4
	ROL BX,CL
	MOV AX,BX
	AND AL,0FH
	CMP AL,0AH
	JGE SHOW1
	ADD AL,30H
	MOV AH,02
	MOV DL,AL
	INT 21H
	JMP NEXT
SHOW1:
	ADD AL,37H
	MOV AH,02
	MOV DL,AL
	INT 21H
NEXT:
	DEC DI
	JNZ LPS
	MOV AH,02
	MOV DL,'H'
	INT 21H
	MOV AH,02
	MOV DL,0AH
	INT 21H
	MOV AH,02
	MOV DL,0DH
	INT 21H
	
	POP DI
	POP DX
	POP CX
	POP BX
	POP AX
	POPF

	ENDM
;-----------------------

DATAS SEGMENT
    ;此处输入数据段代码
    COUNT	DW 20
    COUNT2	DW 18
    ORG 10H
    FIB	DW	20 DUP(1) 
DATAS ENDS

STACKS SEGMENT
    ;此处输入堆栈段代码
STACKS ENDS

CODES SEGMENT
    ASSUME CS:CODES,DS:DATAS,SS:STACKS
START:
    MOV AX,DATAS
    MOV DS,AX
    ;此处输入代码段代码
    MOV SI,OFFSET FIB
    MOV AX,COUNT2
    MOV BX,0
LP:	MOV BX,[SI]
	ADD BX,[SI+2]
	MOV [SI+4],BX
	ADD SI,2
	DEC AX
	JNZ LP
    
    MOV DI,OFFSET FIB
    MOV DX,COUNT
    MOV BX,0
LP1:
	MOV BX,[DI]
	SHOWHEX BX
	ADD DI,2
	DEC DX
	JNZ LP1
    
    MOV AH,4CH
    INT 21H
CODES ENDS
    END START


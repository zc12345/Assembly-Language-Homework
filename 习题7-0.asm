	.MODEL SMALL
	.STACK 64
	.DATA
TEN		DW	10
KASC	DB	4 DUP(?)
STRLEN	DB	4
BINNUM	DW	0
	.CODE
MAIN PROC FAR
	MOV AX,@DATA
	MOV DS,AX
	
	MOV SI,OFFSET KASC	
	CALL GETASC
	;MOV AH,0AH
	;MOV DX,OFFSET KASC
	;INT 21H
	
	MOV SI,OFFSET KASC
	MOV BH,0
	MOV BL,STRLEN
	DEC BX
	CALL TRANS
	MOV BINNUM,AX
	
	MOV AX,BINNUM
	CALL SHOWHEX
	
	MOV AH,4CH
	INT 21H
MAIN ENDP
	;----------------------
	;子模块1
	;实现键盘输入4位十进制数的ascii码存入kasc开始单元
GETASC PROC FAR
	PUSHF
	PUSH DI
	PUSH AX
	

	MOV DI,4
LPG:MOV AH,0
	INT 16H
	MOV [SI],AL
	INC SI
	DEC DI
	JNZ LPG
	
	POP AX
	POP DI
	POPF
	
GETASC ENDP

	;----------------------
	;子模块2
	;将kasc单元开始存放的4位asc码转换为16进制数
	;
TRANS	PROC FAR
	PUSHF
	PUSH DI
	PUSH CX

	SUB DI,DI
	SUB BH,BH
	MOV CX,1
LPT:MOV AL,[SI+BX]
	AND AL,0FH
	SUB AH,AH
	MUL CX
	ADD DI,AX
	MOV AX,CX
	MUL TEN
	MOV CX,AX
	DEC BX
	JNS LPT
	MOV AX,DI
	
	POP CX
	POP DI
	POPF
	
TRANS	ENDP
	;子模块3
	;本模块显示最大为FFFFH的十六进制数
	;AX=待显示的四位十六进制数
SHOWHEX	PROC	FAR

	PUSHF
	PUSH BX
	PUSH CX
	PUSH DX
	PUSH DI
	
	MOV BX,AX
	MOV DI,4
LPS:MOV CL,4
	ROL BX,CL
	MOV AX,BX
	OR AL,30H
	CMP AL,3AH
	JGE SHOW1
	MOV AH,02
	MOV DL,AL
	INT 21H
	JMP NEXT
SHOW1:
	ADD AL,07H
	ADD AL,40H
	MOV AH,02
	MOV DL,AL
	INT 21H
NEXT:
	DEC DI
	JNZ LPS
	
	POP DI
	POP DX
	POP CX
	POP BX
	POPF
	RET
SHOWHEX	ENDP

	END










